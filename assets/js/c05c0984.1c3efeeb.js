"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[495],{71844:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>a,toc:()=>t});var s=r(75366),l=r(26192);const o={},i="Promise",a={id:"Programming/JavaScript/Promise",title:"Promise",description:"Executor",source:"@site/docs/Programming/JavaScript/Promise.md",sourceDirName:"Programming/JavaScript",slug:"/Programming/JavaScript/Promise",permalink:"/note/Programming/JavaScript/Promise",draft:!1,unlisted:!1,editUrl:"https://github.com/steelywing/note/edit/master/docs/Programming/JavaScript/Promise.md",tags:[],version:"current",frontMatter:{},sidebar:"programming",previous:{title:"Module",permalink:"/note/Programming/JavaScript/Module"},next:{title:"Rollup.js",permalink:"/note/Programming/JavaScript/Rollup"}},c={},t=[{value:"Executor",id:"executor",level:2},{value:"Handler function",id:"handler-function",level:2}];function u(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"promise",children:"Promise"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'var executor = (resolve, reject) => {\n    // ...\n    let value = "value";\n\n    resolve(value);\n    // promise.<state> = "fulfilled";\n    // promise.<value> = value;\n\n    reject(value);\n    // promise.<state> = "rejected";\n    // promise.<value> = value;\n};\n\nvar promise = new Promise(executor);\n// promise.<state> = "pending";\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",metastring:'title="pseudo code"',children:'while (promise.<state> == "pending") {  }\n\nif (promise.<state> == "fulfilled") {\n    promise.<onFulfilled>(promise.<value>);\n}\n\nif (promise.<state> == "rejected") {\n    promise.<onRejected>(promise.<value>);\n}\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"function onFulfilled(value) {\n    // ...\n}\n\nfunction onRejected(value) {\n    // ...\n}\n\npromise\n    .then(onFulfilled, onRejected);\n\n// same as\n\npromise\n    .then(onFulfilled)\n    .catch(onRejected);\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'Promise.resolve("value");\n\n// same as\n\nnew Promise((resolve, reject) => {\n    resolve("value");\n});\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'Promise.reject("value");\n\n// same as\n\nnew Promise((resolve, reject) => {\n    reject("value");\n});\n'})}),"\n",(0,s.jsx)(n.h2,{id:"executor",children:"Executor"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"executor"})," will be executed when ",(0,s.jsx)(n.code,{children:"Promise"})," create (",(0,s.jsx)(n.a,{href:"https://tc39.es/ecma262/#sec-promise-executor",children:"Ref"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"resolve"})," and ",(0,s.jsx)(n.code,{children:"reject"})," are callback function"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"executor()"})," no need to return value"]}),"\n"]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["Ref: ",(0,s.jsxs)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/Promise",children:["MDN ",(0,s.jsx)(n.code,{children:"Promise()"})]})]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"handler-function",children:"Handler function"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"onFulfilled(value)"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"onRejected(value)"})}),"\n"]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["Ref: ",(0,s.jsxs)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/then#return_value",children:[(0,s.jsx)(n.code,{children:"Promise().then()"})," return value"]})]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"var promise = new Promise(\n  (resolve, reject) => {\n    // ...\n  }\n);\n\n"})}),"\n",(0,s.jsx)(n.p,{children:"If handler function ..."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"doesn't return value"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'var promise = Promise.resolve().then(() => {\n  // no return;\n});\n\npromise.then((value) => {\n  console.log(promise);\n  console.log("value =", value);\n});\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",metastring:'title="Output"',children:'Promise { <state>: "fulfilled", <value>: undefined }\nvalue = undefined\n'})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["return value that is not ",(0,s.jsx)(n.code,{children:"Promise"})]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'var promise = Promise.resolve().then(() => {\n  return "value";\n});\n\npromise.then((value) => {\n  console.log(promise);\n  console.log("value =", value);\n});\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",metastring:'title="Output"',children:'Promise { <state>: "fulfilled", <value>: "value" }\nvalue = value\n'})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"return Promise.resolve()"})}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'var promise = Promise.resolve().then(() => {\n  return Promise.resolve("value");\n});\n\npromise.then((value) => {\n  console.log(promise);\n  console.log("value =", value);\n});\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",metastring:'title="Output"',children:'Promise { <state>: "fulfilled", <value>: "value" }\nvalue = value\n'})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"return Promise.reject()"})}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'var promise = Promise.resolve().then(() => {\n  return Promise.reject("value");\n});\n\npromise.catch((value) => {\n  console.log(promise);\n  console.log("value =", value);\n});\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",metastring:'title="Output"',children:'Promise { <state>: "rejected", <reason>: "value" }\nvalue = value\n'})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["return pending ",(0,s.jsx)(n.code,{children:"Promise()"})]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'var promise = Promise.resolve().then(() => {\n  return new Promise((resolve, reject) => {\n    resolve("value");\n  });\n});\n\npromise.then((value) => {\n  console.log(promise);\n  console.log("value =", value);\n});\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",metastring:'title="Output"',children:'Promise { <state>: "fulfilled", <value>: "value" }\nvalue = value\n'})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:'throws "error";'})}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'var promise = Promise.resolve().then(() => {\n  throw "error";\n});\n\npromise.catch((value) => {\n  console.log(promise);\n  console.log("value =", value);\n});\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",metastring:'title="Output"',children:'Promise { <state>: "rejected", <reason>: "error" }\nvalue = error\n'})})]})}function d(e={}){const{wrapper:n}={...(0,l.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},26192:(e,n,r)=>{r.d(n,{Z:()=>a,a:()=>i});var s=r(97049);const l={},o=s.createContext(l);function i(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:i(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);