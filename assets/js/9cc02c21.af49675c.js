"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[7813],{3040:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>p,frontMatter:()=>a,metadata:()=>r,toc:()=>i});var o=t(75366),s=t(26192);const a={date:new Date("2022-11-30T00:00:00.000Z"),tags:["GoAccess","Nginx","Log","Proxy","WebSocket"]},l="GoAccess with Nginx proxy",r={permalink:"/note/blog/GoAccess with Nginx proxy",source:"@site/blog/GoAccess with Nginx proxy.md",title:"GoAccess with Nginx proxy",description:"Setup GoAccess WebSocket with Nginx proxy",date:"2022-11-30T00:00:00.000Z",formattedDate:"November 30, 2022",tags:[{label:"GoAccess",permalink:"/note/blog/tags/go-access"},{label:"Nginx",permalink:"/note/blog/tags/nginx"},{label:"Log",permalink:"/note/blog/tags/log"},{label:"Proxy",permalink:"/note/blog/tags/proxy"},{label:"WebSocket",permalink:"/note/blog/tags/web-socket"}],readingTime:.625,hasTruncateMarker:!0,authors:[],frontMatter:{date:"2022-11-30T00:00:00.000Z",tags:["GoAccess","Nginx","Log","Proxy","WebSocket"]},unlisted:!1,prevItem:{title:"7z max compression",permalink:"/note/blog/7z max compression"},nextItem:{title:"Migrate to Blog",permalink:"/note/blog/Migrate to blog"}},c={authorsImageUrls:[]},i=[{value:"GoAccess",id:"goaccess",level:2},{value:"Install",id:"install",level:2},{value:"Real-time web output",id:"real-time-web-output",level:2}];function g(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",p:"p",pre:"pre",...(0,s.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"Setup GoAccess WebSocket with Nginx proxy"}),"\n",(0,o.jsx)(n.h2,{id:"goaccess",children:"GoAccess"}),"\n",(0,o.jsx)(n.p,{children:"Web log analyzer"}),"\n",(0,o.jsx)(n.h2,{id:"install",children:"Install"}),"\n",(0,o.jsx)(n.p,{children:"CentOS"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Install dependency\nsudo yum -y install epel-release\nsudo yum -y update\nsudo yum -y install ncurses-devel gcc\n\n# Optional dependency\nsudo yum -y install geoip-devel tokyocabinet-devel\n\n# Download source\nwget https://tar.goaccess.io/goaccess-1.6.2.tar.gz\ntar -zxf goaccess-1.6.2.tar.gz\n\n# Build\ncd goaccess-1.6.2\n./configure --enable-utf8 --enable-geoip=mmdb\nmake\nmake install\n"})}),"\n",(0,o.jsx)(n.h2,{id:"real-time-web-output",children:"Real-time web output"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"goaccess \n    -o /var/www/html/report/index.html\n    --log-format=COMBINED\n    --real-time-html\n\n    # For WebSocket proxy\n    --ws-url=ws://<server IP address>:80/ws/\n\n    /var/log/nginx/access.log\n"})}),"\n",(0,o.jsx)(n.p,{children:"Nginx proxy"}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsxs)(n.p,{children:["Ref: ",(0,o.jsx)(n.a,{href:"https://www.nginx.com/blog/websocket-nginx/",children:"Nginx WebSocket"})]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-nginx",children:'server {\n    listen 80;\n    server_name example.com;\n\n    location / {\n        root /usr/share/nginx/html/;\n        # ...\n    }\n\n    # Proxy WebSocket /ws/ to localhost:7890/\n    location /ws/ {\n        proxy_pass http://localhost:7890/;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection "Upgrade";\n        proxy_set_header Host $host;\n    }\n}\n'})})]})}function p(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(g,{...e})}):g(e)}},26192:(e,n,t)=>{t.d(n,{Z:()=>r,a:()=>l});var o=t(97049);const s={},a=o.createContext(s);function l(e){const n=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),o.createElement(a.Provider,{value:n},e.children)}}}]);