"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[1943],{74272:(e,n,d)=>{d.r(n),d.d(n,{assets:()=>t,contentTitle:()=>s,default:()=>x,frontMatter:()=>r,metadata:()=>l,toc:()=>h});var c=d(75366),i=d(26192);const r={},s="ffmpeg",l={id:"Note/ffmpeg",title:"ffmpeg",description:"| Option | Description |",source:"@site/docs/Note/ffmpeg.md",sourceDirName:"Note",slug:"/Note/ffmpeg",permalink:"/note/Note/ffmpeg",draft:!1,unlisted:!1,editUrl:"https://github.com/steelywing/note/edit/master/docs/Note/ffmpeg.md",tags:[],version:"current",frontMatter:{},sidebar:"note",previous:{title:"Unity",permalink:"/note/Note/Unity"}},t={},h=[{value:"Input",id:"input",level:2},{value:"Output",id:"output",level:2},{value:"Codec",id:"codec",level:3},{value:"Bit Rate",id:"bit-rate",level:2},{value:"CBR",id:"cbr",level:3},{value:"VBR",id:"vbr",level:3},{value:"CRF",id:"crf",level:3},{value:"AVC",id:"avc",level:2},{value:"HEVC",id:"hevc",level:2},{value:"Video Encoder",id:"video-encoder",level:2},{value:"<code>libx264</code>",id:"libx264",level:3},{value:"<code>h264_nvenc</code>",id:"h264_nvenc",level:3},{value:"<code>libx265</code>",id:"libx265",level:3},{value:"<code>hevc_nvenc</code>",id:"hevc_nvenc",level:3},{value:"Hardware accelerator",id:"hardware-accelerator",level:2},{value:"Pixel format",id:"pixel-format",level:2},{value:"Extract subtitle",id:"extract-subtitle",level:2}];function o(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.a)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.h1,{id:"ffmpeg",children:"ffmpeg"}),"\n",(0,c.jsxs)(n.table,{children:[(0,c.jsx)(n.thead,{children:(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.th,{children:"Option"}),(0,c.jsx)(n.th,{children:"Description"})]})}),(0,c.jsxs)(n.tbody,{children:[(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"-encoders"})}),(0,c.jsx)(n.td,{children:"show available encoders"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"-h encoder=<encoder>"})}),(0,c.jsxs)(n.td,{children:["show help about the ",(0,c.jsx)(n.code,{children:"<encoder>"})]})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"-h decoder=<decoder>"})}),(0,c.jsxs)(n.td,{children:["show help about the ",(0,c.jsx)(n.code,{children:"<decoder>"})]})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"-hide_banner"})}),(0,c.jsx)(n.td,{children:"hide banner"})]})]})]}),"\n",(0,c.jsx)(n.h2,{id:"input",children:"Input"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["place option before ",(0,c.jsx)(n.code,{children:"-i"})]}),"\n"]}),"\n",(0,c.jsxs)(n.table,{children:[(0,c.jsx)(n.thead,{children:(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.th,{children:"Option"}),(0,c.jsx)(n.th,{children:"Description"})]})}),(0,c.jsxs)(n.tbody,{children:[(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"-vsync 0"})}),(0,c.jsx)(n.td,{children:"prevent duplicate and extra frames (fix sync issue?)"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"-i <URL>"})}),(0,c.jsx)(n.td,{children:"Input stream"})]})]})]}),"\n",(0,c.jsx)(n.h2,{id:"output",children:"Output"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["place option before ",(0,c.jsx)(n.code,{children:"<output URL>"})]}),"\n"]}),"\n",(0,c.jsxs)(n.table,{children:[(0,c.jsx)(n.thead,{children:(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.th,{children:"Option"}),(0,c.jsx)(n.th,{children:"Description"})]})}),(0,c.jsxs)(n.tbody,{children:[(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"-c:a <codec>"})}),(0,c.jsx)(n.td,{children:"Select audio encoder"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"-c:v <codec>"})}),(0,c.jsx)(n.td,{children:"Select video encoder"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"-c <codec>"})}),(0,c.jsx)(n.td,{children:"Select encoder"})]})]})]}),"\n",(0,c.jsx)(n.h3,{id:"codec",children:"Codec"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"copy"})}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"bit-rate",children:"Bit Rate"}),"\n",(0,c.jsx)(n.h3,{id:"cbr",children:"CBR"}),"\n",(0,c.jsx)(n.p,{children:"Constant Bit Rate"}),"\n",(0,c.jsx)(n.h3,{id:"vbr",children:"VBR"}),"\n",(0,c.jsx)(n.p,{children:"Variable Bit Rate"}),"\n",(0,c.jsx)(n.h3,{id:"crf",children:"CRF"}),"\n",(0,c.jsx)(n.p,{children:"Constant Rate Factor"}),"\n",(0,c.jsxs)(n.blockquote,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.a,{href:"https://slhck.info/video/2017/02/24/crf-guide.html",children:"Ref"})}),"\n"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Good for offline video"}),"\n",(0,c.jsx)(n.li,{children:"Recommended CRF \u2248 20 ~ 30"}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"avc",children:"AVC"}),"\n",(0,c.jsx)(n.p,{children:"Advanced Video Coding"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"H.264"}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"hevc",children:"HEVC"}),"\n",(0,c.jsx)(n.p,{children:"High Efficiency Video Coding"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"H.265"}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"video-encoder",children:"Video Encoder"}),"\n",(0,c.jsx)(n.h3,{id:"libx264",children:(0,c.jsx)(n.code,{children:"libx264"})}),"\n",(0,c.jsx)(n.p,{children:"Software H.264"}),"\n",(0,c.jsx)(n.h3,{id:"h264_nvenc",children:(0,c.jsx)(n.code,{children:"h264_nvenc"})}),"\n",(0,c.jsx)(n.p,{children:"NVIDIA NVENC H.264 encoder"}),"\n",(0,c.jsx)(n.h3,{id:"libx265",children:(0,c.jsx)(n.code,{children:"libx265"})}),"\n",(0,c.jsx)(n.p,{children:"Software H.265"}),"\n",(0,c.jsxs)(n.table,{children:[(0,c.jsx)(n.thead,{children:(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.th,{children:"Option"}),(0,c.jsx)(n.th,{children:"Description"})]})}),(0,c.jsx)(n.tbody,{children:(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"-crf <CRF>"})}),(0,c.jsx)(n.td,{children:"Constant Rate Factor"})]})})]}),"\n",(0,c.jsx)(n.h3,{id:"hevc_nvenc",children:(0,c.jsx)(n.code,{children:"hevc_nvenc"})}),"\n",(0,c.jsx)(n.p,{children:"NVIDIA NVENC HEVC encoder"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"-preset {slow|medium|fast|p1|...|p7}"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"p1"})," fastest"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"p7"})," slowest"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"hardware-accelerator",children:"Hardware accelerator"}),"\n",(0,c.jsxs)(n.blockquote,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.a,{href:"https://developer.nvidia.com/blog/nvidia-ffmpeg-transcoding-guide/",children:"Ref"})}),"\n"]}),"\n",(0,c.jsxs)(n.table,{children:[(0,c.jsx)(n.thead,{children:(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.th,{children:"Option"}),(0,c.jsx)(n.th,{children:"Description"})]})}),(0,c.jsxs)(n.tbody,{children:[(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"-hwaccel cuda"})}),(0,c.jsx)(n.td,{children:"chooses appropriate hw accelerator"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"-hwaccel_output_format cuda"})}),(0,c.jsx)(n.td,{children:"keeps the decoded frames in GPU memory"})]})]})]}),"\n",(0,c.jsx)(n.h2,{id:"pixel-format",children:"Pixel format"}),"\n",(0,c.jsxs)(n.blockquote,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.a,{href:"https://trac.ffmpeg.org/wiki/Chroma%20Subsampling",children:"Ref"})}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"Show pixel format"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"ffmpeg -pix_fmts\n"})}),"\n",(0,c.jsx)(n.p,{children:"Common format"}),"\n",(0,c.jsxs)(n.table,{children:[(0,c.jsx)(n.thead,{children:(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.th,{children:"Option"}),(0,c.jsx)(n.th,{children:"Description"})]})}),(0,c.jsxs)(n.tbody,{children:[(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"-vf format=<format>"})}),(0,c.jsx)(n.td,{children:"set pixel format"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"yuv420p"})}),(0,c.jsx)(n.td,{children:"8-bit 4:2:0"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"yuv420p10le"})}),(0,c.jsx)(n.td,{children:"10-bit 4:2:0"})]})]})]}),"\n",(0,c.jsx)(n.h2,{id:"extract-subtitle",children:"Extract subtitle"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"ffmpeg -an -vn -i <video.mkv> -map 0:s:0 <sub.srt>\n"})}),"\n",(0,c.jsxs)(n.table,{children:[(0,c.jsx)(n.thead,{children:(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.th,{children:"Option"}),(0,c.jsx)(n.th,{children:"Description"})]})}),(0,c.jsxs)(n.tbody,{children:[(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"-an -vn"})}),(0,c.jsx)(n.td,{children:"no audio, no video (faster)"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"-map 0"})}),(0,c.jsx)(n.td,{children:"the first input"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:":s"})}),(0,c.jsx)(n.td,{children:"subtitle"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:":s:0"})}),(0,c.jsx)(n.td,{children:"the first subtitle"})]})]})]})]})}function x(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(o,{...e})}):o(e)}},26192:(e,n,d)=>{d.d(n,{Z:()=>l,a:()=>s});var c=d(97049);const i={},r=c.createContext(i);function s(e){const n=c.useContext(r);return c.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),c.createElement(r.Provider,{value:n},e.children)}}}]);