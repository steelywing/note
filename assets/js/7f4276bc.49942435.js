"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[3397],{64955:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>c,metadata:()=>a,toc:()=>d});var i=t(75366),s=t(26192);const c={},r="X509",a={id:"Note/OpenSSL/X509",title:"X509",description:"TLS/SSL certificate",source:"@site/docs/Note/OpenSSL/X509.md",sourceDirName:"Note/OpenSSL",slug:"/Note/OpenSSL/X509",permalink:"/note/Note/OpenSSL/X509",draft:!1,unlisted:!1,editUrl:"https://github.com/steelywing/note/edit/master/docs/Note/OpenSSL/X509.md",tags:[],version:"current",frontMatter:{},sidebar:"note",previous:{title:"Key",permalink:"/note/Note/OpenSSL/Key"},next:{title:"RFID",permalink:"/note/Note/RFID"}},l={},d=[{value:"Certificate display and signing",id:"certificate-display-and-signing",level:2},{value:"Self signed certificate using existing key",id:"self-signed-certificate-using-existing-key",level:2},{value:"Display the contents of certificate",id:"display-the-contents-of-certificate",level:2},{value:"Verify if a private key matches a certificate",id:"verify-if-a-private-key-matches-a-certificate",level:2},{value:"Full chain certificate",id:"full-chain-certificate",level:2}];function o(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"x509",children:"X509"}),"\n",(0,i.jsx)(n.p,{children:"TLS/SSL certificate"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://www.openssl.org/docs/man1.1.1/man1/x509.html",children:"Reference"})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"certificate-display-and-signing",children:"Certificate display and signing"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"/note/Note/OpenSSL/CSR#self-signed-certificate",children:"Self signed certificate with new key"})}),"\n",(0,i.jsx)(n.h2,{id:"self-signed-certificate-using-existing-key",children:"Self signed certificate using existing key"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"openssl x509 \n    # By default input is CRT (certificate)\n    # Use CSR as input\n    -req\n    -in <request.csr> \n\n    -days <days>\n    # Private key use for signing\n\n    -signkey <key.pem> \n\n    -out <cert.{crt|pem}> \n"})}),"\n",(0,i.jsx)(n.p,{children:"CA (Certificate Authority) sign certificate"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"openssl x509 \n    -req \n    -in <request.csr> \n\n    -days <days> \n\n    # CA certificate\n    -CA <ca.crt> \n    # CA private key\n    -CAkey <ca.key> \n\n    # Recommended practice\n    # Create serial number file\n    # If the serial number file does not exist, random number is generated\n    [-CAcreateserial]\n\n    # Specify serial number, Decimal 01 02..., Hex 0x1 0x2...\n    [-set_serial <serial>]\n\n    # Specify serial number file, `$(basename <ca.crt> .crt).srl` by default\n    [-CAserial <filename>]\n\n    -out <cert.{crt|pem}>\n"})}),"\n",(0,i.jsx)(n.h2,{id:"display-the-contents-of-certificate",children:"Display the contents of certificate"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Option"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"-dates"})}),(0,i.jsx)(n.td,{children:"Print the start and expiry dates"})]})})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"openssl x509 -in <cert.{crt|pem}> [-dates] -text -noout\n"})}),"\n",(0,i.jsx)(n.h2,{id:"verify-if-a-private-key-matches-a-certificate",children:"Verify if a private key matches a certificate"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://www.ibm.com/support/pages/how-verify-if-private-key-matches-certificate",children:"Reference"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"openssl x509 -noout -modulus -in <cert.crt> | openssl md5\nopenssl rsa -noout -modulus -in <private-key.pem> | openssl md5\nopenssl req -noout -modulus -in <csr.pem> | openssl md5\n"})}),"\n",(0,i.jsx)(n.h2,{id:"full-chain-certificate",children:"Full chain certificate"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"CA = Chain"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cat <cert.crt> <chain.crt> > <fullchain.crt>\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"-----BEGIN CERTIFICATE-----\ncert.crt\n-----END CERTIFICATE-----\n-----BEGIN CERTIFICATE-----\nCA.crt\n-----END CERTIFICATE-----\n-----BEGIN CERTIFICATE-----\nTrustedRoot.crt\n-----END CERTIFICATE----- \n"})})]})}function h(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},26192:(e,n,t)=>{t.d(n,{Z:()=>a,a:()=>r});var i=t(97049);const s={},c=i.createContext(s);function r(e){const n=i.useContext(c);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(c.Provider,{value:n},e.children)}}}]);