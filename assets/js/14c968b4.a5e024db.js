"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[1315],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>d});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var o=a.createContext({}),c=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(o.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,o=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),m=c(n),d=r,k=m["".concat(o,".").concat(d)]||m[d]||u[d]||l;return n?a.createElement(k,i(i({ref:t},p),{},{components:n})):a.createElement(k,i({ref:t},p))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,i=new Array(l);i[0]=m;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var c=2;c<l;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},2061:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>i,default:()=>u,frontMatter:()=>l,metadata:()=>s,toc:()=>c});var a=n(7462),r=(n(7294),n(3905));const l={},i="OpenSSL",s={unversionedId:"Note/OpenSSL",id:"Note/OpenSSL",title:"OpenSSL",description:"File format",source:"@site/docs/Note/OpenSSL.md",sourceDirName:"Note",slug:"/Note/OpenSSL",permalink:"/note/Note/OpenSSL",draft:!1,editUrl:"https://github.com/steelywing/note/edit/master/docs/Note/OpenSSL.md",tags:[],version:"current",frontMatter:{},sidebar:"note",previous:{title:"X509",permalink:"/note/Note/OpenSSL/X509"},next:{title:"RFID",permalink:"/note/Note/RFID"}},o={},c=[{value:"File format",id:"file-format",level:2},{value:"PEM (Privacy-Enhanced Mail)",id:"pem-privacy-enhanced-mail",level:3},{value:"PKCS #12 (<code>.p12</code>)",id:"pkcs-12-p12",level:3},{value:"Convert <code>.pem</code> to <code>.p12</code>",id:"convert-pem-to-p12",level:3},{value:"Certificate signature",id:"certificate-signature",level:2},{value:"Option",id:"option",level:2},{value:"Version",id:"version",level:2},{value:"RSA key",id:"rsa-key",level:2},{value:"CSR (Certificate Signing Request)",id:"csr-certificate-signing-request",level:2},{value:"X509 (TLS/SSL certificate)",id:"x509-tlsssl-certificate",level:2},{value:"Full chain certificate",id:"full-chain-certificate",level:2},{value:"Test SSL/TLS connection",id:"test-ssltls-connection",level:2},{value:"Test SMTP / IMAP StartTLS",id:"test-smtp--imap-starttls",level:2},{value:"CA (Certificate Authority)",id:"ca-certificate-authority",level:2},{value:"CA sign certificate",id:"ca-sign-certificate",level:3},{value:"Revoke signed certificate",id:"revoke-signed-certificate",level:2},{value:"CRL (Certificate Revocation List)",id:"crl-certificate-revocation-list",level:3},{value:"Env",id:"env",level:2},{value:"Build from source",id:"build-from-source",level:2},{value:"Show version",id:"show-version",level:2}],p={toc:c};function u(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"openssl"},"OpenSSL"),(0,r.kt)("h2",{id:"file-format"},"File format"),(0,r.kt)("h3",{id:"pem-privacy-enhanced-mail"},"PEM (Privacy-Enhanced Mail)"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"https://tools.ietf.org/html/rfc1421"},"RFC 1421"))),(0,r.kt)("p",null,"Use to store"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"X509 certificate (",(0,r.kt)("inlineCode",{parentName:"li"},".crt")," ",(0,r.kt)("inlineCode",{parentName:"li"},".pem"),")"),(0,r.kt)("li",{parentName:"ul"},"Public / private key (",(0,r.kt)("inlineCode",{parentName:"li"},".key")," ",(0,r.kt)("inlineCode",{parentName:"li"},".pem"),")"),(0,r.kt)("li",{parentName:"ul"},"Certificate signing request (",(0,r.kt)("inlineCode",{parentName:"li"},".csr")," ",(0,r.kt)("inlineCode",{parentName:"li"},".pem"),")")),(0,r.kt)("h3",{id:"pkcs-12-p12"},"PKCS #12 (",(0,r.kt)("inlineCode",{parentName:"h3"},".p12"),")"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"https://tools.ietf.org/html/rfc7292"},"RFC 7292"))),(0,r.kt)("p",null,"Bundle X509 full chain certificate, private key"),(0,r.kt)("h3",{id:"convert-pem-to-p12"},"Convert ",(0,r.kt)("inlineCode",{parentName:"h3"},".pem")," to ",(0,r.kt)("inlineCode",{parentName:"h3"},".p12")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"https://www.openssl.org/docs/manmaster/man1/openssl-pkcs12.html"},"Reference"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'openssl pkcs12 -export\n  -in <cert.{crt|pem}>\n  [-certfile <ca.crt>]\n  -inkey <private-key.pem>\n  -out <file.p12>\n  [-passout "pass:<password>"]\n  [-name "<name>"]\n')),(0,r.kt)("h2",{id:"certificate-signature"},"Certificate signature"),(0,r.kt)("p",null,"Certificate content"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Owner DN"),(0,r.kt)("li",{parentName:"ul"},"Owner public key"),(0,r.kt)("li",{parentName:"ul"},"CA DN"),(0,r.kt)("li",{parentName:"ul"},"Certificate extensions"),(0,r.kt)("li",{parentName:"ul"},"CA signature (Append after signed)")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// Pseudo code\n// Content is excluded signature\nCASignature = encrypt(hash(Content), CAPrivateKey)\n")),(0,r.kt)("p",null,"Verify signature"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// Pseudo code\n// Content is excluded signature\ndecrypt(CASignature, CAPublicKey) == hash(Content)\n")),(0,r.kt)("h2",{id:"option"},"Option"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Option"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"-noout")),(0,r.kt)("td",{parentName:"tr",align:null},"Prevents output encoded data")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"-text")),(0,r.kt)("td",{parentName:"tr",align:null},"Print the data in text form")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"-modulus")),(0,r.kt)("td",{parentName:"tr",align:null},"Print the modulus of public key")))),(0,r.kt)("h2",{id:"version"},"Version"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"openssl version\n")),(0,r.kt)("h2",{id:"rsa-key"},"RSA key"),(0,r.kt)("p",null,"Generating RSA key"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# Default key lenght = 2048\nopenssl genrsa [-out <file.key>] [<key length>]\n")),(0,r.kt)("p",null,"View RSA key file"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"openssl rsa -in <file.key> -text -noout\n")),(0,r.kt)("p",null,"Extracting RSA public key"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"openssl rsa -in <file.key> -pubout -out <public.key>\n")),(0,r.kt)("h2",{id:"csr-certificate-signing-request"},"CSR (Certificate Signing Request)"),(0,r.kt)("blockquote",null,(0,r.kt)("ul",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.digicert.com/ssl-support/openssl-quick-reference-guide.htm"},"Reference")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.openssl.org/docs/manmaster/man1/openssl-req.html"},"openssl req")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://tools.ietf.org/html/rfc2986"},"RFC 2986")))),(0,r.kt)("p",null,"Creating CSR"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'openssl req\n  # Key\n  {\n    # Create new private key, bits = 2048 / 4096\n    -newkey rsa[:<bits>]\n    # Don\'t encrypt private key (no password)\n    [-nodes]\n    # The new created private key file\n    [-keyout <key.pem>]\n\n    | # or\n\n    # Use specified private key file\n    -key <key.pem>\n  }\n\n  {\n    # Create new CSR\n    -new\n    -out <request.csr>\n\n    | # or\n\n    # Create self signed CRT (certificate) instead of CSR\n    -x509\n    # See X509\n    [<X509 options>]\n    [-set_serial <number>]\n    [-days <days>]\n    [...]\n    -out <cert.pem>\n  }\n\n  # <subject> = /C=<country>/ST=<state>/L=<city>/O=<organization>/OU=<section>/CN=<domain>/emailAddress=<email>\n  [-subj "<subject>"]\n  # <subjectAltName> = <DNS>|<IP>[,...]\n  # <DNS> = DNS:example.com\n  # <IP> = IP:10.0.0.1\n  [-addext "subjectAltName=<subjectAltName>"]\n\n  # Using config file\n  [-config <config.ini>]\n')),(0,r.kt)("p",null,"CSR configuration file ",(0,r.kt)("inlineCode",{parentName:"p"},".ini")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ini"},"[ req ]\n# <key length> = 2048 / 4096 / ...\ndefault_bits = <key length>\ndefault_keyfile = <key file>\ndistinguished_name = req_distinguished_name\nprompt = no\nencrypt_key = no\nreq_extensions = req_ext\n\n[ req_distinguished_name ]\n\n# C=\n# <country> = US | HK | TW | ...\n# ISO 3166-1 alpha-2\n# two-letter country codes\ncountryName = <country>\n\n# ST=\nstateOrProvinceName = <state>\n\n# L=\nlocalityName = <city>\n\n# O=\norganizationName = <company>\n# Multiple organization\n# 1.organizationName = <company>\n# 2.organizationName = <company>\n\n# OU=\norganizationalUnitName = <section / department>\n\n# CN=\n# For wildcard: *.example.com\ncommonName = <domain>\n\nemailAddress = <email>\n\n[ req_ext ]\n# Reference: https://www.openssl.org/docs/man1.1.1/man5/x509v3_config.html#Subject-Alternative-Name\n\n# subjectAltName=DNS:<domain>,DNS:<domain>...\n\n# same as\n\nsubjectAltName = @alt_section\n\n[ alt_section ]\nDNS.1 = <domain>\nDNS.2 = <domain>\n# ...\n")),(0,r.kt)("p",null,"Generate CSR from an existing certificate"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"openssl x509\n  -in <cert.crt>\n  -signkey <key.pem>\n  -x509toreq\n  -out <cert.csr>\n")),(0,r.kt)("p",null,"Verify CSR signature"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"openssl req -text -in <file.csr> -noout -verify\n")),(0,r.kt)("h2",{id:"x509-tlsssl-certificate"},"X509 (TLS/SSL certificate)"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"https://www.openssl.org/docs/man1.1.1/man1/x509.html"},"Reference"))),(0,r.kt)("p",null,"Certificate display and signing"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"#csr-certificate-signing-request"},"Self signed certificate with new key")),(0,r.kt)("p",null,"Self signed certificate using existing key"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"openssl x509 \n    # By default input is CRT (certificate)\n    # Use CSR as input\n    -req\n    -in <request.csr> \n    -days <days>\n    # Private key use for signing\n    -signkey <key.pem> \n    -out <cert.{crt|pem}> \n")),(0,r.kt)("p",null,"CA (Certificate Authority) sign certificate"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"openssl x509 \n    -req \n    -in <request.csr> \n    -days <days> \n    -CA <ca.crt> \n    # CA private key\n    -CAkey <ca.key> \n\n    # Create new serial number file\n    # Recommended practice\n    # If the serial number file does not exist, random number is generated\n    [-CAcreateserial]\n\n    # Specify serial number, Decimal 01 02..., Hex 0x1 0x2...\n    [-set_serial <serial>]\n\n    # Specify serial number file, `$(basename <ca.crt> .crt).srl` by default\n    [-CAserial <filename>]\n\n    -out <cert.{crt|pem}>\n")),(0,r.kt)("p",null,"Display the contents of certificate (",(0,r.kt)("inlineCode",{parentName:"p"},".crt"),")"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Option"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"-dates")),(0,r.kt)("td",{parentName:"tr",align:null},"Print the start and expiry dates")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"openssl x509 -in <cert.{crt|pem}> [-dates] -text -noout\n")),(0,r.kt)("p",null,"Verify if a private key matches a certificate"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"https://www.ibm.com/support/pages/how-verify-if-private-key-matches-certificate"},"Reference"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"openssl x509 -noout -modulus -in <cert.crt> | openssl md5\nopenssl rsa -noout -modulus -in <private-key.pem> | openssl md5\nopenssl req -noout -modulus -in <csr.pem> | openssl md5\n")),(0,r.kt)("h2",{id:"full-chain-certificate"},"Full chain certificate"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"CA = Chain")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"cat <cert.crt> <chain.crt> > <fullchain.crt>\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"-----BEGIN CERTIFICATE-----\ncert.crt\n-----END CERTIFICATE-----\n-----BEGIN CERTIFICATE-----\nCA.crt\n-----END CERTIFICATE-----\n-----BEGIN CERTIFICATE-----\nTrustedRoot.crt\n-----END CERTIFICATE----- \n")),(0,r.kt)("h2",{id:"test-ssltls-connection"},"Test SSL/TLS connection"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Protocol"),(0,r.kt)("th",{parentName:"tr",align:null},"Port"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"HTTPS"),(0,r.kt)("td",{parentName:"tr",align:null},"443")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"IMAPS"),(0,r.kt)("td",{parentName:"tr",align:null},"993")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"IMAP STARTTLS"),(0,r.kt)("td",{parentName:"tr",align:null},"143")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"POP3S"),(0,r.kt)("td",{parentName:"tr",align:null},"995")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"SMTPS"),(0,r.kt)("td",{parentName:"tr",align:null},"465")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"SMTP STARTTLS"),(0,r.kt)("td",{parentName:"tr",align:null},"587")))),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Option"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"-showcerts")),(0,r.kt)("td",{parentName:"tr",align:null},"Show full chain certificate")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"openssl s_client [-showcerts] -connect <host>:<port>\n")),(0,r.kt)("p",null,"Show SSL certificate"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"openssl s_client -connect <host>:<port> | openssl x509 [-noout] [-text]\n")),(0,r.kt)("h2",{id:"test-smtp--imap-starttls"},"Test SMTP / IMAP StartTLS"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"openssl s_client -starttls { smtp | imap | pop3 } -showcerts -connect <host>:<port> -servername <domain>\n")),(0,r.kt)("h2",{id:"ca-certificate-authority"},"CA (Certificate Authority)"),(0,r.kt)("blockquote",null,(0,r.kt)("ul",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.openssl.org/docs/manmaster/man1/openssl-ca.html"},"Reference")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.openssl.org/docs/manmaster/man5/x509v3_config.html"},"X509 V3")))),(0,r.kt)("p",null,"Config"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-properties"},"[ ca ]\ndefault_ca      = CA_default\n\n[ CA_default ]\n\ndir             = .\ndatabase        = $dir/database.txt\nnew_certs_dir   = $dir/new_certs\nunique_subject  = no\n\ncertificate     = $dir/ca.crt\nserial          = $dir/ca.srl\n# rand_serial     = yes\nprivate_key     = $dir/private/ca.key\nRANDFILE        = $dir/private/.rand\n\ndefault_days    = 365000\ndefault_crl_days= 365000\ndefault_md      = sha256\n\npolicy          = policy_any\nemail_in_dn     = no\n\n# Subject name display option\nname_opt        = ca_default\n# Certificate display option\ncert_opt        = ca_default\ncopy_extensions = copy\n\nx509_extensions = extensions\ncrl_extensions  = crl_exts\n\n[ policy_any ]\ncountryName             = optional\nstateOrProvinceName     = optional\nlocalityName            = optional\norganizationName        = supplied\norganizationalUnitName  = optional\ncommonName              = supplied\nemailAddress            = optional\n\n[ extensions ]\n# CA certificate\n# basicConstraints        = critical, CA:TRUE\n# basicConstraints        = critical, CA:TRUE, pathlen:1\n\n# End-user certificate\nbasicConstraints        = CA:FALSE\n\nsubjectKeyIdentifier    = hash\nauthorityKeyIdentifier  = keyid:always, issuer:always\nissuerAltName           = issuer:copy\ncrlDistributionPoints   = URI:http://example.com/ca.crl\n\n[ crl_exts ]\nauthorityKeyIdentifier = keyid:always,issuer:always\n")),(0,r.kt)("h3",{id:"ca-sign-certificate"},"CA sign certificate"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"openssl ca\n  [-batch] # No prompt\n  [-config <ca.conf>]\n  -in <request.csr>\n  -out <cert.{crt|pem}>\n")),(0,r.kt)("h2",{id:"revoke-signed-certificate"},"Revoke signed certificate"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"openssl ca\n  [-config <ca.conf>]\n  -revoke <cert.{crt|pem}>\n")),(0,r.kt)("h3",{id:"crl-certificate-revocation-list"},"CRL (Certificate Revocation List)"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"openssl ca -gencrl\n  [-config <ca.conf>]\n  -out <revoked.crl>\n")),(0,r.kt)("h2",{id:"env"},"Env"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"OPENSSL_CONF=<openssl.cnf>\n")),(0,r.kt)("p",null,"Same as"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"openssl ... -config <openssl.cnf>\n")),(0,r.kt)("h2",{id:"build-from-source"},"Build from source"),(0,r.kt)("p",null,"CentOS"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# Install dependency\nsudo yum -y install epel-release\nsudo yum install -y make gcc perl-core perl-Text-Template zlib-devel wget\n\nwget https://www.openssl.org/source/openssl-1.1.1q.tar.gz\n\ntar -zxf openssl-1.1.1q.tar.gz\ncd openssl-1.1.1q\n\n./config --prefix=/usr/local/ --openssldir=/etc/ssl --libdir=lib shared zlib-dynamic\nmake\nmake test\nmake install\n")),(0,r.kt)("h2",{id:"show-version"},"Show version"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"openssl version\n")))}u.isMDXComponent=!0}}]);