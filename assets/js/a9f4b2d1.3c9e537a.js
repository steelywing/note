"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[4308],{40455:(e,n,d)=>{d.r(n),d.d(n,{assets:()=>h,contentTitle:()=>i,default:()=>x,frontMatter:()=>r,metadata:()=>t,toc:()=>l});var s=d(75366),c=d(26192);const r={},i="Disk Benchmark",t={id:"Linux/Disk Benchmark",title:"Disk Benchmark",description:"Disk Benchmark / Performance / Speed",source:"@site/docs/Linux/Disk Benchmark.md",sourceDirName:"Linux",slug:"/Linux/Disk Benchmark",permalink:"/note/Linux/Disk Benchmark",draft:!1,unlisted:!1,editUrl:"https://github.com/steelywing/note/edit/master/docs/Linux/Disk Benchmark.md",tags:[],version:"current",frontMatter:{},sidebar:"linux",previous:{title:"Directory Stack - BASH",permalink:"/note/Linux/Directory Stack"},next:{title:"Disk / Storage",permalink:"/note/Linux/Disk"}},h={},l=[{value:"Write speed",id:"write-speed",level:2},{value:"Read speed",id:"read-speed",level:2}];function o(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",hr:"hr",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,c.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"disk-benchmark",children:"Disk Benchmark"}),"\n",(0,s.jsx)(n.p,{children:"Disk Benchmark / Performance / Speed"}),"\n",(0,s.jsx)(n.h2,{id:"write-speed",children:"Write speed"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"dd \n    if=/dev/zero \n    of=<file> \n    bs=<size>[K|M|G] \n    count=<count>[K|M|G] \n    { conv=fsync | oflag={sync|dsync|direct} }\n"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Option"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"conv=fsync"})}),(0,s.jsx)(n.td,{children:"Synchronize before finishing"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"dsync"})}),(0,s.jsx)(n.td,{children:"Synchronized I/O for data"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"sync"})}),(0,s.jsx)(n.td,{children:"Synchronized I/O for data and meta data"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"direct"})}),(0,s.jsx)(n.td,{children:"Direct I/O"})]})]})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"dd if=/dev/zero of=temp bs=1M count=1K oflag=direct; rm temp\n"})}),"\n",(0,s.jsx)(n.h2,{id:"read-speed",children:"Read speed"}),"\n",(0,s.jsxs)(n.p,{children:["Using ",(0,s.jsx)(n.code,{children:"dd iflag=direct"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"dd\n    if=<file>\n    of=/dev/null\n    bs=<size>[<unit>]\n    [count=<count>[<unit>]]\n    iflag=direct\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"dd if=/dev/sda1 of=/dev/null bs=1M count=1K iflag=direct\n"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Unit"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"c"})}),(0,s.jsx)(n.td,{children:"1"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"w"})}),(0,s.jsx)(n.td,{children:"2"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"b"})}),(0,s.jsx)(n.td,{children:"512"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"kB"})}),(0,s.jsx)(n.td,{children:"1000"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"K"})}),(0,s.jsx)(n.td,{children:"1024"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"MB"})}),(0,s.jsx)(n.td,{children:"1000\xb2"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"M"})}),(0,s.jsx)(n.td,{children:"1024\xb2"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"GB"})}),(0,s.jsx)(n.td,{children:"1000\xb3"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"G"})}),(0,s.jsx)(n.td,{children:"1024\xb3"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"T"})}),(0,s.jsx)(n.td,{children:"1024\u2074"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"P"})}),(0,s.jsx)(n.td,{children:"1024\u2075"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"E"})}),(0,s.jsx)(n.td,{children:"1024\u2076"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Z"})}),(0,s.jsx)(n.td,{children:"1024\u2077"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Y"})}),(0,s.jsx)(n.td,{children:"1024\u2078"})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.p,{children:["Using ",(0,s.jsx)(n.code,{children:"drop_caches"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Synchronize cached writes to persistent storage\nsync\n\n# Free cache\necho 3 > /proc/sys/vm/drop_caches\n\ndd if=<file> of=/dev/null bs=<size>[K|M|G] [count=<count>[K|M|G]]\n"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.a,{href:"https://www.kernel.org/doc/Documentation/sysctl/vm.txt",children:[(0,s.jsx)(n.code,{children:"drop_caches"})," doc"]})}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.p,{children:"Read speed test without prior cache"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"hdparm -t /dev/<device>\n"})}),"\n",(0,s.jsx)(n.p,{children:"Read speed test with buffer"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"hdparm -T /dev/<device>\n"})})]})}function x(e={}){const{wrapper:n}={...(0,c.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},26192:(e,n,d)=>{d.d(n,{Z:()=>t,a:()=>i});var s=d(97049);const c={},r=s.createContext(c);function i(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:i(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);