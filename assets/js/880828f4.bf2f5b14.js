"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[5933],{54561:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>a,frontMatter:()=>r,metadata:()=>o,toc:()=>l});var i=t(75366),s=t(26192);const r={tags:["Cisco","IOS","Route"]},c="Routing",o={id:"Network/Cisco/IOS/Routing",title:"Routing",description:"Gateway",source:"@site/docs/Network/Cisco/IOS/Routing.md",sourceDirName:"Network/Cisco/IOS",slug:"/Network/Cisco/IOS/Routing",permalink:"/note/Network/Cisco/IOS/Routing",draft:!1,unlisted:!1,editUrl:"https://github.com/steelywing/note/edit/master/docs/Network/Cisco/IOS/Routing.md",tags:[{label:"Cisco",permalink:"/note/tags/cisco"},{label:"IOS",permalink:"/note/tags/ios"},{label:"Route",permalink:"/note/tags/route"}],version:"current",frontMatter:{tags:["Cisco","IOS","Route"]},sidebar:"network",previous:{title:"Reset password",permalink:"/note/Network/Cisco/IOS/ResetPassword"},next:{title:"SPAN",permalink:"/note/Network/Cisco/IOS/SPAN"}},d={},l=[{value:"Gateway",id:"gateway",level:2},{value:"Change to routing mode",id:"change-to-routing-mode",level:2},{value:"Policy-based routing",id:"policy-based-routing",level:2},{value:"OSPF",id:"ospf",level:2},{value:"Enable OSPF",id:"enable-ospf",level:3},{value:"Attach interface to OSPF",id:"attach-interface-to-ospf",level:3}];function h(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"routing",children:"Routing"}),"\n",(0,i.jsx)(n.h2,{id:"gateway",children:"Gateway"}),"\n",(0,i.jsxs)(n.p,{children:["For ",(0,i.jsx)(n.code,{children:"no ip routing"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Switch(config)# ip default-gateway <gateway>\n"})}),"\n",(0,i.jsxs)(n.p,{children:["For ",(0,i.jsx)(n.code,{children:"ip routing"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Switch(config)# ip route 0.0.0.0 0.0.0.0 <gateway>\n"})}),"\n",(0,i.jsx)(n.h2,{id:"change-to-routing-mode",children:"Change to routing mode"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Switch(config)# ip routing\n"})}),"\n",(0,i.jsx)(n.h2,{id:"policy-based-routing",children:"Policy-based routing"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://www.cisco.com/c/en/us/td/docs/ios/12_2/qos/configuration/guide/fqos_c/qcfpbr.html",children:"Reference"})}),"\n"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"ACL"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"permit"})}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"route-map"})," is applied, the next ",(0,i.jsx)(n.code,{children:"route-map"})," clause is not evaluated"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"deny"})}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"route-map"})," is not applied, the next ",(0,i.jsx)(n.code,{children:"route-map"})," clause is evaluated"]})]})]})]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:(0,i.jsx)(n.code,{children:"route-map"})}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"permit"})}),(0,i.jsx)(n.td,{children:"route is redistributed"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"deny"})}),(0,i.jsx)(n.td,{children:"route is not redistributed"})]})]})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"route-map"})," default is permit"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Switch(config)# route-map <route-map name> [permit|deny] [<sequence number>]\n\n! Default (no configured match) match all\nSwitch(config-route-map)# match ip address <ACL>\nSwitch(config-route-map)# set ip next-hop <IP>\n\nSwitch(config-if)# ip policy route-map <route-map name>\n"})}),"\n",(0,i.jsx)(n.h2,{id:"ospf",children:"OSPF"}),"\n",(0,i.jsx)(n.p,{children:"Open Shortest Path First"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"The LSDB (Link-State DataBase) of routers within the same area are same"}),"\n",(0,i.jsxs)(n.li,{children:["OSPF distribute routes to the same ",(0,i.jsx)(n.code,{children:"Area ID"})]}),"\n",(0,i.jsxs)(n.li,{children:["Area ID ",(0,i.jsx)(n.code,{children:"0"})," / ",(0,i.jsx)(n.code,{children:"0.0.0.0"})," is Backbone Area"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"enable-ospf",children:"Enable OSPF"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"<process ID>"})," is local use only"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Switch(config)# router ospf <process ID>\nSwitch(config-router)#\n"})}),"\n",(0,i.jsx)(n.h3,{id:"attach-interface-to-ospf",children:"Attach interface to OSPF"}),"\n",(0,i.jsx)(n.p,{children:"Method 1"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"<IP address>"})," use to match interface"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"network 0.0.0.0 255.255.255.255"})," match all interface"]}),"\n",(0,i.jsxs)(n.li,{children:["OSPF distribute routes to the same ",(0,i.jsx)(n.code,{children:"Area ID"})]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Switch(config-router)# network \n    <IP address> <inverse mask> \n    area <area ID>\n"})}),"\n",(0,i.jsx)(n.p,{children:"Method 2"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Switch(config-if)# ip ospf <process ID> area <area ID>\n"})}),"\n",(0,i.jsx)(n.p,{children:"List LSAs (Link State Advertisements)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Switch# show ip ospf database\n"})}),"\n",(0,i.jsx)(n.p,{children:"List OSPF neighbor"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Switch# show ip ospf neighbor\n"})}),"\n",(0,i.jsx)(n.p,{children:"List OSPF routes"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Switch# show ip route ospf\n"})}),"\n",(0,i.jsx)(n.p,{children:"Redistributing connected networks into OSPF"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://www.cisco.com/c/en/us/support/docs/ip/open-shortest-path-first-ospf/18722-redist-conn.html",children:"Reference"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Switch(config-router)# redistribute connected subnets\n"})}),"\n",(0,i.jsx)(n.p,{children:"Redistributing static routes into OSPF"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Switch(config-router)# redistribute static subnets\n"})}),"\n",(0,i.jsx)(n.p,{children:"Redistributing default route into OSPF"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://www.cisco.com/c/en/us/support/docs/ip/open-shortest-path-first-ospf/47868-ospfdb9.html",children:"Reference"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Switch(config-router)# default-information originate\n"})})]})}function a(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},26192:(e,n,t)=>{t.d(n,{Z:()=>o,a:()=>c});var i=t(97049);const s={},r=i.createContext(s);function c(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);