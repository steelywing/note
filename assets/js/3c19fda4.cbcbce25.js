"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[1146],{44252:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>h,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var i=r(75366),t=r(26192);const o={tags:["Cisco","IOS","STP"]},s="STP",l={id:"Network/Cisco/IOS/STP",title:"STP",description:"Spanning Tree Protocol",source:"@site/docs/Network/Cisco/IOS/STP.md",sourceDirName:"Network/Cisco/IOS",slug:"/Network/Cisco/IOS/STP",permalink:"/note/Network/Cisco/IOS/STP",draft:!1,unlisted:!1,editUrl:"https://github.com/steelywing/note/edit/master/docs/Network/Cisco/IOS/STP.md",tags:[{label:"Cisco",permalink:"/note/tags/cisco"},{label:"IOS",permalink:"/note/tags/ios"},{label:"STP",permalink:"/note/tags/stp"}],version:"current",frontMatter:{tags:["Cisco","IOS","STP"]},sidebar:"network",previous:{title:"SPAN",permalink:"/note/Network/Cisco/IOS/SPAN"},next:{title:"SMB",permalink:"/note/Network/Cisco/SMB"}},d={},c=[{value:"STP mode",id:"stp-mode",level:2},{value:"Root guard",id:"root-guard",level:2},{value:"Loop guard",id:"loop-guard",level:2},{value:"Port fast",id:"port-fast",level:2},{value:"BPDU guard",id:"bpdu-guard",level:2},{value:"BPDU filter",id:"bpdu-filter",level:2}];function a(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"stp",children:"STP"}),"\n",(0,i.jsx)(n.p,{children:"Spanning Tree Protocol"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Spanning_Tree_Protocol",children:"Wiki Reference"})}),"\n"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://www.alliedtelesis.com/sites/default/files/documents/how-alliedware-plus/howto_aw-_config_pvst_interop_cisco_revb.pdf",children:"AlliedWare Reference"})}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["STP (Spanning Tree Protocol) / CST (Common Spanning Tree)","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"IEEE 802.1D"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["RSTP (Rapid Spanning Tree Protocol)","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"IEEE 802.1w"}),"\n",(0,i.jsx)(n.li,{children:"Compatible with CST"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["MSTP (Multiple Spanning Tree Protocol)","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"IEEE 802.1s, IEEE 802.1Q-2005"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["PVST (Per-VLAN Spanning Tree)","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Cisco proprietary protocol"}),"\n",(0,i.jsx)(n.li,{children:"PVST = CST BPDU on native VLAN + SSTP per VLAN"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Rapid-PVST","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Cisco proprietary protocol"}),"\n",(0,i.jsx)(n.li,{children:"Compatible with PVST"}),"\n",(0,i.jsx)(n.li,{children:"PVST = RSTP BPDU on native VLAN + SSTP per VLAN"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Port role"}),(0,i.jsx)(n.th,{children:"Forward BPDU"}),(0,i.jsx)(n.th,{children:"Forward frame"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Root"}),(0,i.jsx)(n.td,{children:"X"}),(0,i.jsx)(n.td,{children:"O"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Blocked / Alternate"}),(0,i.jsx)(n.td,{children:"X"}),(0,i.jsx)(n.td,{children:"X"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Designated"}),(0,i.jsx)(n.td,{children:"O"}),(0,i.jsx)(n.td,{children:"O"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"stp-mode",children:"STP mode"}),"\n",(0,i.jsx)(n.p,{children:"Recommended: Rapid-PVST"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Switch(config)# spanning-tree mode { pvst | rapid-pvst | mst }\n"})}),"\n",(0,i.jsx)(n.h2,{id:"root-guard",children:"Root guard"}),"\n",(0,i.jsx)(n.p,{children:"If a root guard enabled port receives superior STP BPDU, root guard moves this port to a root-inconsistent (listening) state."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Switch(config-if)# spanning-tree guard root\n"})}),"\n",(0,i.jsx)(n.h2,{id:"loop-guard",children:"Loop guard"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://www.cisco.com/c/en/us/support/docs/lan-switching/spanning-tree-protocol/10596-84.html",children:"Reference"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"If a non-designated port no longer receive STP BPDU, the port transitions into loop-inconsistent (blocking) state."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Switch(config-if)# spanning-tree guard loop\n"})}),"\n",(0,i.jsx)(n.p,{children:"Enable loop guard on all port"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Switch(config)# spanning-tree loopguard default\n"})}),"\n",(0,i.jsx)(n.h2,{id:"port-fast",children:"Port fast"}),"\n",(0,i.jsx)(n.p,{children:"Immediately brings interface to the forwarding state from a blocking state"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Switch(config-if)# spanning-tree portfast [disable]\n"})}),"\n",(0,i.jsx)(n.p,{children:"Enable port fast on all access port"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Switch(config)# spanning-tree portfast default\n"})}),"\n",(0,i.jsx)(n.h2,{id:"bpdu-guard",children:"BPDU guard"}),"\n",(0,i.jsxs)(n.p,{children:["If BPDU is detected on the port, the port will be ",(0,i.jsx)(n.code,{children:"err-disable"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Switch(config-if)# spanning-tree bpduguard { enable | disable }\n"})}),"\n",(0,i.jsx)(n.p,{children:"Enable BPDU guard on all port fast port"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Switch(config)# spanning-tree portfast bpduguard default\n"})}),"\n",(0,i.jsx)(n.h2,{id:"bpdu-filter",children:"BPDU filter"}),"\n",(0,i.jsx)(n.p,{children:"Ignore BPDU"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Switch(config-if)# spanning-tree bpdufilter { enable | disable }\n"})})]})}function h(e={}){const{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},26192:(e,n,r)=>{r.d(n,{Z:()=>l,a:()=>s});var i=r(97049);const t={},o=i.createContext(t);function s(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);