"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[495],{71844:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>c,toc:()=>t});var l=r(75366),s=r(26192);const o={},i="Promise",c={id:"Programming/JavaScript/Promise",title:"Promise",description:"Executor",source:"@site/docs/Programming/JavaScript/Promise.md",sourceDirName:"Programming/JavaScript",slug:"/Programming/JavaScript/Promise",permalink:"/note/Programming/JavaScript/Promise",draft:!1,unlisted:!1,editUrl:"https://github.com/steelywing/note/edit/master/docs/Programming/JavaScript/Promise.md",tags:[],version:"current",frontMatter:{},sidebar:"programming",previous:{title:"NPM",permalink:"/note/Programming/JavaScript/NPM"},next:{title:"Rollup.js",permalink:"/note/Programming/JavaScript/Rollup"}},a={},t=[{value:"Executor",id:"executor",level:2},{value:"Handler function",id:"handler-function",level:2},{value:"About handler function return value",id:"about-handler-function-return-value",level:3}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.a)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h1,{id:"promise",children:"Promise"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:"var promise = new Promise(\n  (resolve, reject) => {\n    // ...\n  }\n);\n\n"})}),"\n",(0,l.jsx)(n.h2,{id:"executor",children:"Executor"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"executor"})," will be executed when ",(0,l.jsx)(n.code,{children:"Promise"})," create (",(0,l.jsx)(n.a,{href:"https://tc39.es/ecma262/#sec-promise-executor",children:"Ref"}),")"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"resolve"})," and ",(0,l.jsx)(n.code,{children:"reject"})," are callback function"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"executor()"})," no need to return value"]}),"\n"]}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsxs)(n.p,{children:["Ref: ",(0,l.jsxs)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/Promise",children:["MDN ",(0,l.jsx)(n.code,{children:"Promise()"})]})]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:'var executor = (resolve, reject) => {\n    // if success, call resolve()\n    resolve("value");\n    // after call resolve():\n    // Promise { <state>: "fulfilled", <value>: "value" }\n\n    // if fail, call reject()\n    reject("error");\n    // after call reject():\n    // Promise { <state>: "rejected", <reason>: "error" }\n};\n\nvar promise = new Promise(executor);\n// Promise { <state>: "pending" }\n'})}),"\n",(0,l.jsx)(n.p,{children:"Example"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:"var promise = new Promise((resolve, reject) => {\n    // fetch the data\n    let data = localStorage.getItem(\"data\");\n\n    if (data === null) {\n        // failed\n        reject(\"no data\");\n    }\n    \n    // success\n    resolve(data);\n});\n\npromise\n    .then((value) => {\n        console.log('data: ' + value);\n    })\n    .catch((value) => {\n        console.log('error: ' + value);\n    })\n"})}),"\n",(0,l.jsx)(n.h2,{id:"handler-function",children:"Handler function"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"onFulfilled(value)"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"onRejected(value)"})}),"\n"]}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsxs)(n.p,{children:["Ref: ",(0,l.jsxs)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/then#return_value",children:[(0,l.jsx)(n.code,{children:"Promise().then()"})," return value"]})]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:"function onFulfilled(value) {\n    // ...\n}\n\nfunction onRejected(value) {\n    // ...\n}\n\npromise\n    .then(onFulfilled, onRejected);\n\n// same as\n\npromise\n    .then(onFulfilled)\n    .catch(onRejected);\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:'Promise.resolve("value");\n\n// same as\n\nnew Promise((resolve, reject) => {\n    resolve("value");\n});\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:'Promise.reject("value");\n\n// same as\n\nnew Promise((resolve, reject) => {\n    reject("value");\n});\n'})}),"\n",(0,l.jsx)(n.h3,{id:"about-handler-function-return-value",children:"About handler function return value"}),"\n",(0,l.jsx)(n.p,{children:"If handler function doesn't return value"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"value"})," is ",(0,l.jsx)(n.code,{children:"undefined"})]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:'var promise = Promise.resolve().then(() => {\n  // no return;\n});\n\npromise.then((value) => {\n  console.log(promise);\n  console.log("value:", value);\n});\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",metastring:'title="Output"',children:'Promise { <state>: "fulfilled", <value>: undefined }\nvalue: undefined\n'})}),"\n",(0,l.jsxs)(n.p,{children:["If handler function return value that is not ",(0,l.jsx)(n.code,{children:"Promise"})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"value"})," is the return value"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:'var promise = Promise.resolve().then(() => {\n  return "value";\n});\n\npromise.then((value) => {\n  console.log(promise);\n  console.log("value:", value);\n});\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",metastring:'title="Output"',children:'Promise { <state>: "fulfilled", <value>: "value" }\nvalue: value\n'})}),"\n",(0,l.jsxs)(n.p,{children:["If handler function return a ",(0,l.jsx)(n.code,{children:"Promise.resolve()"})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"value"})," is ",(0,l.jsx)(n.code,{children:"promise.<value>"})]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:'var promise = Promise.resolve().then(() => {\n  return Promise.resolve("value");\n});\n\npromise.then((value) => {\n  console.log(promise);\n  console.log("value:", value);\n});\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",metastring:'title="Output"',children:'Promise { <state>: "fulfilled", <value>: "value" }\nvalue: value\n'})}),"\n",(0,l.jsxs)(n.p,{children:["If handler function return a ",(0,l.jsx)(n.code,{children:"Promise.reject()"})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"value"})," is ",(0,l.jsx)(n.code,{children:"promise.<reason>"})]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:'var promise = Promise.resolve().then(() => {\n  return Promise.reject("value");\n});\n\npromise.catch((value) => {\n  console.log(promise);\n  console.log("value:", value);\n});\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",metastring:'title="Output"',children:'Promise { <state>: "rejected", <reason>: "value" }\nvalue: value\n'})}),"\n",(0,l.jsxs)(n.p,{children:["If handler function return pending ",(0,l.jsx)(n.code,{children:"Promise"})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["it will wait the ",(0,l.jsx)(n.code,{children:"Promise"})," to resolve"]}),"\n",(0,l.jsxs)(n.li,{children:["the ",(0,l.jsx)(n.code,{children:"value"})," is the pending ",(0,l.jsx)(n.code,{children:"Promise"})," resolve value"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:'var promise = Promise.resolve().then(() => {\n  return new Promise((resolve, reject) => {\n    resolve("value");\n  });\n});\n\npromise.then((value) => {\n  console.log(promise);\n  console.log("value:", value);\n});\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",metastring:'title="Output"',children:'Promise { <state>: "fulfilled", <value>: "value" }\nvalue: value\n'})}),"\n",(0,l.jsxs)(n.p,{children:["If handler function ",(0,l.jsx)(n.code,{children:'throw "value"'})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"the promise will be rejected"}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"value"})," is the throw ",(0,l.jsx)(n.code,{children:"value"})]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:'var promise = Promise.resolve().then(() => {\n  throw "error";\n});\n\npromise.catch((value) => {\n  console.log(promise);\n  console.log("value:", value);\n});\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",metastring:'title="Output"',children:'Promise { <state>: "rejected", <reason>: "error" }\nvalue: error\n'})})]})}function u(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},26192:(e,n,r)=>{r.d(n,{Z:()=>c,a:()=>i});var l=r(97049);const s={},o=l.createContext(s);function i(e){const n=l.useContext(o);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),l.createElement(o.Provider,{value:n},e.children)}}}]);